pipeline {
  agent any
  environment{
    def dockerHome = tool 'MyDocker'
    def mavenHome  = tool 'MyMaven'
    def javaHome = tool 'MyJava8'
    env.PATH = "${dockerHome}/bin:${mavenHome}/bin:${javaHome}/bin${env.PATH}"
  }
  stages {
    stage('Build project') {
      steps {
          echo 'Build application'
          sh 'mvn clean install -DSkipTests'
      }
    }

    stage('Docker Build WebApp') {
      steps {
         sh 'mkdir -p ./tmp'
         sh 'cp ./target/Tema1-1.0-SNAPSHOT.jar ./tmp'
      }
    }

    stage('Deploy') {
    	steps {
    	echo 'Now deploy'
    	sh 'java -jar ./tmp/Tema1-1.0-SNAPSHOT.jar'
    	echo 'Succesfully deployed'
         }
       }
    }
}